<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Things Todo</title>
    <style>
        body {
            background-color: black;
        }

        .visible {
            display: block;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>

    <section>
        <div class="container">
            <div class="row justify-content-center">
                <h1 class="text-center text-warning">Things Todo</h1>
                <div class="col-12 col-md-8">
                    <input type="text" id="search" class="form-control my-3" placeholder="search task here">
                    <form action="">
                        <input type="text" id="enter" class="form-control my-3" placeholder="Enter task here">
                        <input type="submit" value="Add task" class="btn btn-success w-100" name="" id="">
                    </form>

                    <ul class="my-5 list-group">
                        <!-- <li class="text-white ">task 1 <button class="btn btn-danger">Delete</button></li>
                        <li class="text-white ">task 2 <button class="btn btn-danger">Delete</button></li>
                        <li class="text-white ">task 3 <button class="btn btn-danger">Delete</button></li> -->
                    </ul>
                </div>
            </div>
        </div>
    </section>


    <script>

        let formTodo = document.querySelector('form');

        formTodo.addEventListener('submit', function (stop) {
            console.log(stop);
            stop.preventDefault()

            let enterTask = document.querySelector('#enter')
            let createUl = document.querySelector('ul')
            let createdTask = enterTask.value;


            let createli = document.createElement('li');
            createli.setAttribute('class', 'list-group-item')
            createli.innerText = createdTask;

            let liBtn = document.createElement('button')
            liBtn.setAttribute('class', 'btn btn-danger float-end')
            liBtn.innerText = "Delete"

            createli.append(liBtn)
            createUl.append(createli)

            enterTask.value = ""


            liBtn.addEventListener('click', function (cut) {

                if (confirm('Delete this file?')) {

                    cut.target.parentElement.remove()
                }
            })

        })

        let searchBar = document.querySelector('#search')

        searchBar.addEventListener('keyup', function () {
            console.log("test");
            let searchtext = searchBar.value;

            let allcreatedli = document.querySelectorAll('li');
            console.log(allcreatedli);


            for (let index = 0; index < allcreatedli.length; index++) {
                let singleCreatedli = allcreatedli[index].firstChild.data;

                console.log(singleCreatedli);

                console.log(singleCreatedli.indexOf(searchtext))

                if (singleCreatedli.includes(searchtext)) {

                    allcreatedli[index].setAttribute('class', 'visible list-group-item')
                    // allcreatedli[index].style.display="block";
                    // allcreatedli[index].style.list="list-group-items";
                }

                else {
                    allcreatedli[index].setAttribute('class', 'hidden')
                    // allcreatedli[index].style.display="none";
                }
            }
        })

        // searchBar.addEventListener('keydown', function () {
        //     console.log("text inside");
        //     let searchtext = searchBar.value;

        //     let allcreatedli = document.querySelectorAll('li');
        //     console.log(allcreatedli);


        //     for (let index = 0; index < allcreatedli.length; index++) {
        //         console.log(allcreatedli[index].firstChild.data)
        //         let singleCreatedli = allcreatedli[index].firstChild.data;

        //         console.log(singleCreatedli);

        //         // console.log(singleCreatedli.indexof(searchtext))

        //         if (singleCreatedli.includes(searchtext)) {

        //             allcreatedli[index].setAttribute('class', 'visible list-group-items')
        //             // allcreatedli[index].style.display="block";
        //             // allcreatedli[index].style.list="list-group-items";
        //         }

        //         else {
        //             allcreatedli[index].setAttribute('class', 'hidden')
        //             // allcreatedli[index].style.display="none";
        //         }
        //     }
        // })
        
    </script>
</body>

</html>